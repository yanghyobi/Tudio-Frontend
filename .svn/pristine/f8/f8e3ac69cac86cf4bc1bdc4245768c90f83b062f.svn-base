import React, { useState, useEffect, useMemo } from 'react';
import axios from 'axios';
import DatePicker, { registerLocale } from 'react-datepicker';
import Swal from 'sweetalert2';
import "react-datepicker/dist/react-datepicker.css";
// CSS ÏûÑÌè¨Ìä∏
import './MeetingRoomAdmin.css'; // ÌöåÏùòÏã§ Ï†ÑÏö© (Ï∫òÎ¶∞Îçî, ÌïÑÌÑ∞Î≤ÑÌäº Îì±)
import '../../../assets/css/admin/pages/AdminCommon.css'; // Í≥µÌÜµ Ïä§ÌÉÄÏùº

import { ko } from 'date-fns/locale';
import { BarChart, Bar, XAxis, Tooltip, ResponsiveContainer } from 'recharts';

registerLocale('ko', ko);

const MeetingRoomList = () => {

  // --- State Í¥ÄÎ¶¨ ---
  const [branches, setBranches] = useState([]);               // ÏßÄÏ†ê Î™©Î°ù
  const [selectedBranch, setSelectedBranch] = useState(null); // ÏÑ†ÌÉùÎêú ÏßÄÏ†ê ID
  const [rooms, setRooms] = useState([]);                     // ÌöåÏùòÏã§ Î™©Î°ù
  const [loading, setLoading] = useState(false);              // Î°úÎî©

  const [expandedRoomId, setExpandedRoomId] = useState(null); // ÌÜ†Í∏Ä Ïó¥Î¶∞ Î∞© ID
  const [currentDate, setCurrentDate] = useState(new Date()); // Í∏∞Ï§Ä ÎÇ†Ïßú
  const [weekSchedule, setWeekSchedule] = useState([]);       // Ïä§ÏºÄÏ§Ñ Îç∞Ïù¥ÌÑ∞
  const [selectedSlots, setSelectedSlots] = useState([]);     // Îã§Ï§ë ÏÑ†ÌÉù Ïä¨Î°Ø

  // ÌÜµÍ≥ÑÏö© State
  const [roomStats, setRoomStats] = useState({
      totalRooms: 0,
      activeRooms: 0,
      maintenanceCount: 0, // Ï†êÍ≤Ä Ï§ë
      popularTimeData: []  // ÏãúÍ∞ÑÎåÄÎ≥Ñ ÌòºÏû°ÎèÑ Ï∞®Ìä∏Ïö©
  });

  useEffect(() => { fetchBranches(); }, []);
  useEffect(() => { 
      if (selectedBranch) {
          fetchRooms(selectedBranch);
          fetchRoomStatistics(selectedBranch);
      }
  }, [selectedBranch]);

  // --- API Ìò∏Ï∂ú Ìï®ÏàòÎì§ ---
  const fetchBranches = async () => {
    try {
      const res = await axios.get('http://localhost:8060/admin/meetingRoom/branchList');
      setBranches(res.data);
      if (res.data.length > 0) setSelectedBranch(res.data[0].branchId);
    } catch (e) { console.error("ÏßÄÏ†ê Î°úÎìú Ïã§Ìå®", e); }
  };

  const fetchRooms = async (branchId) => {
    setLoading(true);
    try {
      const res = await axios.get(`http://localhost:8060/admin/meetingRoom/meetingRoomList?branchId=${branchId}`);
      setRooms(res.data);
      setExpandedRoomId(null);
      const total = res.data.length;
      const active = res.data.filter(r => r.roomStatus === 'Y').length;
      // roomStats ÏóÖÎç∞Ïù¥Ìä∏Îäî fetchRoomStatisticsÏóêÏÑú ÏùºÍ¥Ñ Ï≤òÎ¶¨ Í∂åÏû•ÌïòÏßÄÎßå, ÏùºÎã® Ïú†ÏßÄ
    } catch (e) { console.error("ÌöåÏùòÏã§ Î°úÎìú Ïã§Ìå®", e); } finally { setLoading(false); }
  };

  const fetchRoomStatistics = async (branchId) => {
      try {
          const roomRes = await axios.get(`http://localhost:8060/admin/meetingRoom/meetingRoomList?branchId=${branchId}`);
          const currentRooms = roomRes.data;
          const currentRoomIds = currentRooms.map(r => r.roomId);

          const resRes = await axios.get('http://localhost:8060/admin/meetingRoom/reservationList');
          const allReservations = resRes.data;

          let maintCount = 0;
          const timeCounts = { 9: 0, 10: 0, 11: 0, 12: 0, 13: 0, 14: 0, 15: 0, 16: 0, 17: 0 };

          allReservations.forEach(r => {
              if (currentRoomIds.includes(r.roomId)) {
                  if (r.resType === 'B' && (r.resStatus === 702 || r.resStatus === 704)) {
                      maintCount++;
                  }
                  if (r.resStatus !== 703 && r.resStatus !== 706) { 
                      const startH = parseInt(r.resStartdate.substring(11, 13));
                      const endH = parseInt(r.resEnddate.substring(11, 13));
                      for (let h = startH; h < endH; h++) {
                          if (timeCounts[h] !== undefined) timeCounts[h]++;
                      }
                  }
              }
          });

          const chartData = Object.keys(timeCounts).map(h => ({
              name: `${h}Ïãú`,
              count: timeCounts[h]
          }));

          setRoomStats({
              totalRooms: currentRooms.length,
              activeRooms: currentRooms.filter(r => r.roomStatus === 'Y').length,
              maintenanceCount: maintCount,
              popularTimeData: chartData 
          });

      } catch (e) { console.error("ÌÜµÍ≥Ñ Î°úÎìú Ïã§Ìå®", e); }
  };

  const fetchWeekSchedule = async (roomId, date) => {
    const day = date.getDay();
    const start = new Date(date);
    start.setDate(date.getDate() - day);
    const end = new Date(start);
    end.setDate(start.getDate() + 6);

    const sStr = start.toISOString().split('T')[0];
    const eStr = end.toISOString().split('T')[0];

    try {
      const res = await axios.get(`http://localhost:8060/admin/meetingRoom/weekSchedule`, {
        params: { roomId, startDate: sStr, endDate: eStr }
      });
      setWeekSchedule(res.data);
    } catch (e) { console.error("Ïä§ÏºÄÏ§Ñ Î°úÎìú Ïã§Ìå®", e); }
  };

  useEffect(() => {
    if (expandedRoomId) {
      fetchWeekSchedule(expandedRoomId, currentDate);
      setSelectedSlots([]);
    }
  }, [expandedRoomId, currentDate]);

  // --- Ïù¥Î≤§Ìä∏ Ìï∏Îì§Îü¨ ---
  const handleAdminCancel = async (reservationId, currentMemberName) => {
    const { value: reason } = await Swal.fire({
      title: 'üîí Í¥ÄÎ¶¨Ïûê Ï†êÍ≤Ä Ï†ÑÌôò',
      html: `ÌòÑÏû¨ ÏòàÏïΩÏûê: <b>${currentMemberName}</b><br>Ïù¥ ÏòàÏïΩÏùÑ <span style="color:red">Í¥ÄÎ¶¨Ïûê Ï†êÍ≤Ä</span>ÏúºÎ°ú Î≥ÄÍ≤ΩÌïòÏãúÍ≤†ÏäµÎãàÍπå?`,
      input: 'text', inputLabel: 'Î≥ÄÍ≤Ω ÏÇ¨Ïú† (ÌïÑÏàò)', inputPlaceholder: 'Ïòà: Í∏¥Í∏â ÏãúÏÑ§ Ï†êÍ≤Ä',
      showCancelButton: true, confirmButtonColor: '#d33', confirmButtonText: 'Î≥ÄÍ≤Ω ÌôïÏ†ï', cancelButtonText: 'Ï∑®ÏÜå',
      inputValidator: (value) => { if (!value) return 'ÏÇ¨Ïú†Î•º ÏûÖÎ†•Ìï¥Ïïº Ìï©ÎãàÎã§!'; }
    });

    if (!reason) return;

    try {
      await axios.post('http://localhost:8060/admin/meetingRoom/updateStatus', {
        reservationId: reservationId, memberNo: 12, projectNo: 0, resMeetingTitle: "ÌöåÏùòÏã§ Ï†êÍ≤ÄÏ§ë", 
        resStatus: 704, resType: 'B', resUpdmember: 12, resContent: reason 
      });
      Swal.fire('ÏôÑÎ£å', 'ÏòàÏïΩÏù¥ Ï∑®ÏÜå Ï≤òÎ¶¨ÎêòÏóàÏäµÎãàÎã§.', 'success');
      fetchWeekSchedule(expandedRoomId, currentDate);
      fetchRoomStatistics(selectedBranch);
    } catch (e) { Swal.fire('Ïò§Î•ò', 'Ï∑®ÏÜå Ï≤òÎ¶¨Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.', 'error'); }
  };

  const handleBlockSelectedSlots = async () => {
    if (selectedSlots.length === 0) return;
    const { value: reason } = await Swal.fire({
      title: 'üîí ÏòàÏïΩ Î∂àÍ∞Ä ÏÑ§Ï†ï', input: 'text',
      inputLabel: `ÏÑ†ÌÉùÌïú ${selectedSlots.length}Í∞úÏùò ÏãúÍ∞ÑÏùÑ ÎßâÏúºÏãúÍ≤†ÏäµÎãàÍπå?`,
      inputPlaceholder: 'ÏÇ¨Ïú† ÏûÖÎ†• (Ïòà: ÏãúÏÑ§ Ï†êÍ≤Ä)', showCancelButton: true,
      confirmButtonText: 'ÏÑ§Ï†ï', cancelButtonText: 'Ï∑®ÏÜå',
      inputValidator: (value) => { if (!value) return 'ÏÇ¨Ïú†Î•º ÏûÖÎ†•Ìï¥Ïïº Ìï©ÎãàÎã§!'; }
    });

    if (!reason) return;

    try {
      const promises = selectedSlots.map(slot => {
        const startTimeStr = String(slot.hour).padStart(2, '0');
        const endTimeStr = String(slot.hour + 1).padStart(2, '0');
        return axios.post('http://localhost:8060/admin/meetingRoom/block', {
          roomId: expandedRoomId, memberNo: 12, projectNo: 0, 
          resMeetingTitle: "[Í¥ÄÎ¶¨Ïûê Ï†êÍ≤Ä]", resContent: reason,
          resStatus: 704, resType: 'B', 
          resStartdate: `${slot.date}T${startTimeStr}:00:00`,
          resEnddate: `${slot.date}T${endTimeStr}:00:00`
        });
      });
      await Promise.all(promises);
      Swal.fire('ÏôÑÎ£å', 'ÏÑ†ÌÉùÌïú ÏãúÍ∞ÑÏù¥ Ï∞®Îã®ÎêòÏóàÏäµÎãàÎã§.', 'success');
      setSelectedSlots([]); 
      fetchWeekSchedule(expandedRoomId, currentDate);
      fetchRoomStatistics(selectedBranch);
    } catch (e) { Swal.fire('Ïò§Î•ò', 'Ï≤òÎ¶¨ Ïã§Ìå®', 'error'); }
  };

  const handleSlotClick = (dateStr, hour) => {
    const bookedItem = weekSchedule.find(item => {
      const itemDate = typeof item.RES_DATE === 'string' ? item.RES_DATE.split(' ')[0] : '';
      if (itemDate !== dateStr) return false;
      const startH = parseInt(item.START_TIME.split(':')[0], 10);
      const endH = parseInt(item.END_TIME.split(':')[0], 10);
      return hour >= startH && hour < endH;
    });

    if (bookedItem) {
        const resId = bookedItem.RESERVATION_ID; 
        const memberName = bookedItem.MEMBER_NAME || 'ÏÇ¨Ïö©Ïûê'; 
        handleAdminCancel(resId, memberName);
        return; 
    }
    toggleSlotSelection(dateStr, hour);
  };

  const formatWeekRange = (date) => {
    const start = new Date(date);
    start.setDate(date.getDate() - date.getDay()); 
    const end = new Date(start);
    end.setDate(start.getDate() + 6); 
    const format = (d) => {
      const year = d.getFullYear(); const month = String(d.getMonth() + 1).padStart(2, '0');
      const day = String(d.getDate()).padStart(2, '0');
      return `${year}.${month}.${day}`;
    };
    return `${format(start)} (Ïùº) ~ ${format(end)} (ÌÜ†)`;
  };

  const moveWeek = (dir) => {
    const newDate = new Date(currentDate);
    newDate.setDate(currentDate.getDate() + (dir * 7));
    setCurrentDate(newDate);
  };

  const toggleRoom = (roomId) => {
    if (expandedRoomId === roomId) { setExpandedRoomId(null); setSelectedSlots([]); }
    else { setExpandedRoomId(roomId); }
  };

  const toggleSlotSelection = (dateStr, hour) => {
    const exists = selectedSlots.find(s => s.date === dateStr && s.hour === hour);
    if (exists) setSelectedSlots(prev => prev.filter(s => !(s.date === dateStr && s.hour === hour)));
    else setSelectedSlots(prev => [...prev, { date: dateStr, hour }]);
  };

  const currentBranchName = branches.find(b => b.branchId === selectedBranch)?.branchName || 'ÏßÄÏ†ê';

  return (
    // ‚òÖ 1. Í≥µÌÜµ ÎûòÌçº ÌÅ¥ÎûòÏä§ Ï†ÅÏö©
    <div className="admin-content-wrapper meeting-room-scope">
        
        {/* ‚òÖ 2. Í≥µÌÜµ ÌÉÄÏù¥ÌãÄ ÏòÅÏó≠ */}
        <div className="admin-title-row">
            <h2 className="admin-page-title">
                <i className="bi bi-gear"></i>
                ÌöåÏùòÏã§ Í¥ÄÎ¶¨
            </h2>
        </div>

        {/* --- [1] ÌÜµÍ≥Ñ ÎåÄÏãúÎ≥¥Îìú (admin-dashboard-grid ÏÇ¨Ïö©) --- */}
        <div className="admin-dashboard-grid">
            
            {/* 1. Ï¥ù ÌöåÏùòÏã§ */}
            <div className="admin-stat-card">
                <div className="stat-header">
                    <i className="bi bi-building text-primary-custom"></i> Ï¥ù ÌöåÏùòÏã§
                </div>
                <div className="stat-value-row">
                    <span className="stat-value-big text-primary-custom">{roomStats.totalRooms}</span>
                    <span className="text-muted small">Í∞úÏã§</span>
                </div>
                <p className="stat-desc">{currentBranchName} Ï†ÑÏ≤¥ ÌöåÏùòÏã§</p>
            </div>

            {/* 2. Ï†êÍ≤Ä Ï§ë */}
            <div className="admin-stat-card">
                <div className="stat-header">
                    <i className="bi bi-tools text-danger-custom"></i> Ï†êÍ≤Ä/Í¥ÄÎ¶¨ Ï§ë
                </div>
                <div className="stat-value-row">
                    <span className="stat-value-big text-danger-custom">{roomStats.maintenanceCount}</span>
                    <span className="text-muted small">Í±¥</span>
                </div>
                <p className="stat-desc">ÌòÑÏû¨ Í¥ÄÎ¶¨ÏûêÍ∞Ä Ï∞®Îã®Ìïú ÏòàÏïΩ</p>
            </div>

            {/* 3. Ï∞®Ìä∏ (ÌòºÏû°ÎèÑ) */}
            <div className="admin-stat-card">
                <div className="stat-header">
                    <i className="bi bi-graph-up"></i> ÏãúÍ∞ÑÎåÄÎ≥Ñ ÏòàÏïΩ Î∂ÑÌè¨
                </div>
                <div style={{ width: '100%', height: 100 }}>
                    <ResponsiveContainer>
                        <BarChart data={roomStats.popularTimeData}>
                            <XAxis dataKey="name" tick={{fontSize: 11}} interval={0} />
                            <Tooltip 
                                cursor={{fill: 'transparent'}} 
                                contentStyle={{borderRadius:'8px', border:'none', boxShadow:'0 2px 8px rgba(0,0,0,0.1)'}}
                            />
                            <Bar dataKey="count" fill="#4dabf7" radius={[4, 4, 4, 4]} barSize={20} />
                        </BarChart>
                    </ResponsiveContainer>
                </div>
            </div>
        </div>


        {/* --- [2] ÏßÄÏ†ê ÌÉ≠ & ÌÖåÏù¥Î∏î --- */}
        
        {/* ÏßÄÏ†ê ÏÑ†ÌÉù ÌÉ≠ */}
        <div className="filter-tabs">
            {branches.map(b => (
                <button
                    key={b.branchId}
                    className={`filter-btn ${selectedBranch === b.branchId ? 'active' : ''}`}
                    onClick={() => setSelectedBranch(b.branchId)}
                >
                    {b.branchName}
                </button>
            ))}
        </div>

        {/* ÌÖåÏù¥Î∏î (Í≥µÌÜµ Î∞ïÏä§ Ï†ÅÏö©) */}
        <div className="admin-common-box">
            <div style={{ padding: '20px' }}>
                <h4 style={{fontSize: '1.2rem', display: 'flex', alignItems: 'center', margin:0}}>
                    <i className="bi bi-building me-2"></i>{currentBranchName} ÌöåÏùòÏã§ Î™©Î°ù
                </h4>
            
                <div className="res-table-wrapper" style={{border:'none', boxShadow:'none', padding:0}}>
                    <table className="res-table" style={{marginTop:'20px'}}>
                        <thead>
                            <tr>
                                <th className="ps-4" style={{width:'60px'}}>No</th>
                                <th>ÌöåÏùòÏã§Î™Ö</th>
                                <th>ÏàòÏö©Ïù∏Ïõê</th>
                                <th>ÏÉÅÌÉú</th>
                                <th className="text-center" style={{width:'80px'}}>Ïä§ÏºÄÏ§Ñ</th>
                            </tr>
                        </thead>
                        <tbody>
                            {rooms.length === 0 ? (
                                <tr><td colSpan="5" className="text-center p-4">Îì±Î°ùÎêú ÌöåÏùòÏã§Ïù¥ ÏóÜÏäµÎãàÎã§.</td></tr>
                            ) : rooms.map((room, idx) => (
                            <React.Fragment key={room.roomId}>
                                {/* ÌöåÏùòÏã§ Ìñâ */}
                                <tr 
                                    onClick={() => toggleRoom(room.roomId)} 
                                    style={{ cursor: 'pointer' }} 
                                    className={expandedRoomId === room.roomId ? 'table-active' : ''}
                                >
                                    <td className="ps-4">{idx + 1}</td>
                                    <td><span className="fw-bold">{room.roomName}</span></td>
                                    <td><span className="badge bg-light text-dark border">{room.roomCapacity}Î™Ö</span></td>
                                    <td>
                                        {room.roomStatus === 'Y' 
                                            ? <span className="status-badge status-702">Ïö¥ÏòÅÏ§ë</span> 
                                            : <span className="status-badge status-704">Ï§ëÎã®</span>}
                                    </td>
                                    <td className="text-center">
                                        <i className={`bi bi-chevron-${expandedRoomId === room.roomId ? 'up' : 'down'}`}></i>
                                    </td>
                                </tr>

                                {/* Ïä§ÏºÄÏ§ÑÎü¨ ÌôïÏû• ÏòÅÏó≠ */}
                                {expandedRoomId === room.roomId && (
                                    <tr>
                                        <td colSpan="5" style={{padding: '0', borderBottom: '1px solid #dee2e6'}}>
                                            <div style={{padding: '20px', backgroundColor: '#f8f9fa'}}>
                                                <div className="schedule-container" style={{marginBottom:0}}>
                                                
                                                    {/* Îã¨Î†• Ïª®Ìä∏Î°§Îü¨ */}
                                                    <div className="d-flex justify-content-between align-items-center mb-3 p-3 border-bottom">
                                                        <div className="d-flex align-items-center gap-2">
                                                            <button className="btn btn-outline-secondary btn-sm rounded-circle" onClick={() => moveWeek(-1)}>
                                                                <i className="bi bi-chevron-left"></i>
                                                            </button>
                                                            <div className="custom-datepicker-wrapper">
                                                                <DatePicker
                                                                    selected={currentDate}
                                                                    onChange={(date) => setCurrentDate(date)}
                                                                    locale="ko"
                                                                    dateFormat="yyyy.MM.dd"
                                                                    popperPlacement="bottom-start"
                                                                    customInput={
                                                                        <button className="btn btn-light fw-bold border" style={{minWidth: '240px'}}>
                                                                            <i className="bi bi-calendar-check me-2 text-primary"></i>
                                                                            {formatWeekRange(currentDate)}
                                                                        </button>
                                                                    }
                                                                />
                                                            </div>
                                                            <button className="btn btn-outline-secondary btn-sm rounded-circle" onClick={() => moveWeek(1)}>
                                                                <i className="bi bi-chevron-right"></i>
                                                            </button>
                                                        </div>

                                                        {selectedSlots.length > 0 && (
                                                            <button className="btn btn-danger btn-sm fw-bold animate__animated animate__fadeIn" onClick={handleBlockSelectedSlots}>
                                                                <i className="bi bi-slash-circle me-1"></i> {selectedSlots.length}Í±¥ ÏòàÏïΩ ÎßâÍ∏∞
                                                            </button>
                                                        )}
                                                    </div>

                                                    {/* Ï£ºÍ∞Ñ ÏãúÍ∞ÑÌëú Í∑∏Î¶¨Îìú */}
                                                    <div className="week-grid">
                                                        {['Ïùº', 'Ïõî', 'Ìôî', 'Ïàò', 'Î™©', 'Í∏à', 'ÌÜ†'].map((day, i) => {
                                                            const d = new Date(currentDate);
                                                            d.setDate(currentDate.getDate() - currentDate.getDay() + i);
                                                            const dateStr = d.toISOString().split('T')[0];

                                                            return (
                                                                <div key={i} className="day-column">
                                                                    <div className={`day-header ${i === 0 ? 'text-danger' : i === 6 ? 'text-primary' : ''}`}>
                                                                        {day} ({d.getDate()})
                                                                    </div>
                                                                    <div className="time-slots">
                                                                        {[9, 10, 11, 12, 13, 14, 15, 16, 17].map(hour => {
                                                                            const bookedItem = weekSchedule.find(item => {
                                                                                const itemDate = typeof item.RES_DATE === 'string' ? item.RES_DATE.split(' ')[0] : '';
                                                                                if (itemDate !== dateStr) return false;
                                                                                const startH = parseInt(item.START_TIME.split(':')[0], 10);
                                                                                const endH = parseInt(item.END_TIME.split(':')[0], 10);
                                                                                return hour >= startH && hour < endH;
                                                                            });

                                                                            const isSelected = selectedSlots.some(s => s.date === dateStr && s.hour === hour);
                                                                            let label = "ÏòàÏïΩÎê®";
                                                                            let labelClass = "booked-label";

                                                                            if (bookedItem) {
                                                                                if (bookedItem.RES_TYPE === 'B') {
                                                                                    label = "Í¥ÄÎ¶¨ÏûêÏ†êÍ≤Ä"; 
                                                                                    labelClass = "booked-label admin"; 
                                                                                } else {
                                                                                    label = "ÏÇ¨Ïö©ÏûêÏòàÏïΩ"; 
                                                                                    labelClass = "booked-label user";
                                                                                }
                                                                            }

                                                                            return (
                                                                                <div
                                                                                    key={hour}
                                                                                    className={`time-slot ${bookedItem ? 'booked' : ''} ${isSelected ? 'selected' : ''}`}
                                                                                    style={{ cursor: 'pointer' }}
                                                                                    onClick={() => handleSlotClick(dateStr, hour)}
                                                                                >
                                                                                    <span className="small">{hour}:00</span>
                                                                                    {bookedItem && (
                                                                                        <>
                                                                                            <span className={labelClass}>{label}</span>
                                                                                            <div className="custom-tooltip">
                                                                                                <div className="tooltip-header">
                                                                                                    {bookedItem.BRANCH_NAME} - {bookedItem.ROOM_NAME}
                                                                                                </div>
                                                                                                <div className="tooltip-row">
                                                                                                    <span className="tooltip-label">ÏãúÍ∞Ñ</span>
                                                                                                    <span className="tooltip-value">{bookedItem.START_TIME} ~ {bookedItem.END_TIME}</span>
                                                                                                </div>
                                                                                                <div className="tooltip-row">
                                                                                                    <span className="tooltip-label">ÏòàÏïΩÏûê</span>
                                                                                                    <span className="tooltip-value">{bookedItem.MEMBER_NAME}</span>
                                                                                                </div>
                                                                                                <div className="mt-2 text-muted" style={{fontSize:'12px'}}>
                                                                                                    <i className="bi bi-info-circle me-1"></i>
                                                                                                    {bookedItem.RES_CONTENT || bookedItem.RES_MEETING_TITLE || 'ÎÇ¥Ïö© ÏóÜÏùå'}
                                                                                                </div>
                                                                                            </div>
                                                                                        </>
                                                                                    )}
                                                                                </div>
                                                                            );
                                                                        })}
                                                                    </div>
                                                                </div>
                                                            );
                                                        })}
                                                    </div>
                                                    
                                                    <div className="p-2 text-end text-muted small border-top">
                                                        <span className="me-3"><i className="bi bi-square-fill text-white border me-1"></i>Í∞ÄÎä•</span>
                                                        <span className="me-3"><i className="bi bi-square-fill text-primary opacity-50 me-1"></i>ÏÑ†ÌÉùÎê®</span>
                                                        <span><i className="bi bi-square-fill text-secondary opacity-25 me-1"></i>Î∂àÍ∞Ä(ÌÅ¥Î¶≠ÌïòÏó¨ Í¥ÄÎ¶¨)</span>
                                                    </div>

                                                </div>
                                            </div>
                                        </td>
                                    </tr>
                                )}
                            </React.Fragment>
                            ))}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
  );
};

export default MeetingRoomList;