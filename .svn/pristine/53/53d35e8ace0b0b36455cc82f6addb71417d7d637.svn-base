const { defineConfig } = require("vite");
const react = require("@vitejs/plugin-react");
const path = require("path");

// =========================================================
// [기존 설정] - 배포 시 참고를 위해 주석 처리함 (삭제 금지)
// =========================================================
/*
module.exports = defineConfig({
  plugins: [react()],
  base: "/tudio/survey/",
  build: {
    outDir: path.resolve(__dirname, "../Tudio/src/main/resources/static/tudio/survey"),
    emptyOutDir: true,
  },
  server: {
    proxy: {
      "/tudio": "http://localhost:8060",
    },
  },
});
*/

// =========================================================
// [신규 설정] - React 마이그레이션 개발용 (현재 활성화됨)
// =========================================================
module.exports = defineConfig({
  plugins: [react()],
  
  // 개발 중에는 루트('/') 경로 사용 -> localhost:5173/admin 접속 가능해짐
  base: "/",

  server: {
    port: 5173, // 포트 고정
    proxy: {
      "/api": {
        target: "http://localhost:8060",
        changeOrigin: true
      },

      "/tudio": {
        target: "http://localhost:8060",
        changeOrigin: true
      },

      "/images": {
        target: "http://localhost:8060",
        changeOrigin: true
      },
    },
  },
});